<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Webassembly client | Nym Docs</title><meta data-react-helmet="true" property="og:url" content="https://nymtech.net/docs/current/build-apps/wasm-client"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Webassembly client | Nym Docs"><meta data-react-helmet="true" name="description" content="How to integrate the Nym webassembly client into your own applications to enable strong privacy for your users"><meta data-react-helmet="true" property="og:description" content="How to integrate the Nym webassembly client into your own applications to enable strong privacy for your users"><link data-react-helmet="true" rel="shortcut icon" href="/img/docs/FAVICON.png"><link data-react-helmet="true" rel="canonical" href="https://nymtech.net/docs/current/build-apps/wasm-client"><link data-react-helmet="true" rel="alternate" href="https://nymtech.net/docs/current/build-apps/wasm-client" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nymtech.net/docs/current/build-apps/wasm-client" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a0560233.css">
<link rel="preload" href="/assets/js/runtime~main.eaa180ac.js" as="script">
<link rel="preload" href="/assets/js/main.ce1a70fd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://nymtech.net" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/docs/FAVICON.png" alt="Nym Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/docs/FAVICON.png" alt="Nym Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nym</b></a><a class="navbar__item navbar__link" href="/docs/0.11.0/overview/index">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/current/overview/index">ðŸš§ current ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/current/build-apps/wasm-client">ðŸš§ current ðŸš§</a></li><li><a class="dropdown__link" href="/docs/0.11.0/build-apps/wasm-client">v0.11.0</a></li></ul></div><a href="https://github.com/nymtech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT" style="margin-left:1px">â˜½</span></div><div class="react-toggle-track-x"><span class="toggle_71bT" style="margin-left:1px">â˜¼</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Run Nym Nodes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Use Apps</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Build Apps</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/current/build-apps/build-apps">Build Nym Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/current/build-apps/choose-a-client">Choose a client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/current/build-apps/websocket-client">Websocket client</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/current/build-apps/wasm-client">Webassembly client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/current/build-apps/demos">Demos</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Community</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Nym Docs <b>ðŸš§ current ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/0.11.0/build-apps/wasm-client">latest version</a></b> (v0.11.0).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: ðŸš§ current ðŸš§</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Webassembly client</h1></header><p>The Nym webassembly client allows any webassembly-capable runtime to build and send Sphinx packets to the Nym network.</p><p>You can install <a href="https://www.npmjs.com/package/@nymproject/nym-client-wasm" target="_blank" rel="noopener noreferrer">@nymproject/nym-client-wasm</a> via <code>npm</code> from its package page, or with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> i @nymproject/nym-client-wasm</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>nym-client-wasm</code> package allows easy creation of Sphinx packets from within mobile apps and browser-based client-side apps (including Electron or similar). Browser extensions should also work.</p><p>The webassembly client lets you deliver web apps that build and send Sphinx packets solely in a web browser window. However, note that all the normal constraints of <a href="https://pomcor.com/2017/06/02/keys-in-browser/" target="_blank" rel="noopener noreferrer">browser-based key storage</a> and same-origin rules (which are there for good reason) make it difficult to structure pure webapps apps securely. We are still assessing what can be done here.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="building-apps-with-nym-client-wasm"></a>Building apps with nym-client-wasm<a class="hash-link" href="#building-apps-with-nym-client-wasm" title="Direct link to heading">#</a></h3><p>There are two example applications located in the directory <code>clients/webassembly</code> in the main Nym platform codebase. The <code>js-example</code> is a simple, bare-bones JavaScript app. The <code>react-example</code> is a nicer-looking chat app done in React and Typescript.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="initializing-a-new-nym-identity"></a>Initializing a new Nym identity<a class="hash-link" href="#initializing-a-new-nym-identity" title="Direct link to heading">#</a></h4><p>The main methods you&#x27;ll use from the NPM package are:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> identity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Identity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This generates a new Nym identity, consisting of a public/private keypair and a Nym gateway address.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constructing-a-nym-client"></a>Constructing a Nym client<a class="hash-link" href="#constructing-a-nym-client" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">directoryUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> identity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> authToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This returns a nym Client which connects to a Nym gateway via websocket. All communication with the Nym network happens through this client.</p><p>The <code>directoryUrl</code> of the Nym testnet is <code>http://testnet-validator1.nymtech.net:8081</code>. Use that if you want to connect to the running testnet.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="running-the-nym-client"></a>Running the Nym client<a class="hash-link" href="#running-the-nym-client" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will cause the client to retrieve a network topology from the defined <code>directoryUrl</code>, and connect to its gateway via websocket. Cover traffic is not yet sent, but message sends should work after client start.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sending-messages"></a>Sending messages<a class="hash-link" href="#sending-messages" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">message</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> recipient</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Sends a message up the websocket to this client&#x27;s Nym gateway.</p><p>NOTE: the webassembly client currently does not implement chunking. Messages over ~1KB will cause a panic. This will be fixed in a future version.</p><p><code>message</code> must be a string at the moment. Binary <code>Blob</code> and <code>ArrayBuffer</code>
will be supported soon.</p><p><code>recipient</code> is a Nym address as a string.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-the-clients-address"></a>Getting the client&#x27;s address<a class="hash-link" href="#getting-the-clients-address" title="Direct link to heading">#</a></h4><p>Given a client, to get its address, you can call:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">formatAsRecipient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="surbs"></a>SURBs<a class="hash-link" href="#surbs" title="Direct link to heading">#</a></h4><p>Anonymous replies using surbs don&#x27;t yet work in the webassembly client. They should be available in the next release.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="json"></a>JSON<a class="hash-link" href="#json" title="Direct link to heading">#</a></h4><p>Sending JSON is fairly simple. If you&#x27;re playing with the wasm example app, just stick it into the message box and send it (or send it programmatically as the <code>message</code> content of <code>client.sendMessage(message, recipient)</code> in your own application code.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="think-about-what-youre-sending"></a>Think about what you&#x27;re sending!<a class="hash-link" href="#think-about-what-youre-sending" title="Direct link to heading">#</a></h4><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Think about what information your app sends. That goes for whatever you put into your Sphinx packet messages as well as what your app&#x27;s environment may leak.</p></div></div><p>Whenever you write client peaps using HTML/JavaScript, we recommend that you do not load external resources from CDNs. Webapp developers do this all the time, to save load time for common resources, or just for convenience. But when you&#x27;re writing privacy apps it&#x27;s better not to make these kinds of requests. Pack everything locally.</p><p>If you use only local resources within your Electron app or your browser extensions, explicitly encoding request data in a Sphinx packet does protect you from the normal leakage that gets sent in a browser HTTP request. <a href="https://panopticlick.eff.org/" target="_blank" rel="noopener noreferrer">There&#x27;s a lot of stuff that leaks when you make an HTTP request from a browser window</a>. Luckily, all that metadata and request leakage doesn&#x27;t happen in Nym, because you&#x27;re choosing very explicitly what to encode into Sphinx packets, instead of sending a whole browser environment by default.</p></div><footer class="row docusaurus-mt-lg"><div class="col"></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-08-19T17:05:56.000Z">8/19/2021</time></b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/current/build-apps/websocket-client"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Websocket client</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/current/build-apps/demos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Demos Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#building-apps-with-nym-client-wasm" class="table-of-contents__link">Building apps with nym-client-wasm</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://nymtech.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://keybase.io/team/nymtech.friends" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Keybase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nymtech" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/nymchan" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/nymproject/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://medium.com/nymtech" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.eaa180ac.js"></script>
<script src="/assets/js/main.ce1a70fd.js"></script>
</body>
</html>