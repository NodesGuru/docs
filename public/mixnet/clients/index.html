<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.0" />
    <meta name="description" content="Nym Documentation for mixnodes, loopix, coconut credentials, validators, and privacy-related systems.">
<meta name="author" content="Nym Team">

    <link rel="icon" href="/docs/images/favicon.png" type="image/png">

    <title>Mixnet client :: Nym Docs</title>

    
    <link href="/docs/css/nucleus.css?1571858038" rel="stylesheet">
    <link href="/docs/css/fontawesome-all.min.css?1571858038" rel="stylesheet">
    <link href="/docs/css/hybrid.css?1571858038" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css?1571858038" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css?1571858038" rel="stylesheet">
    <link href="/docs/css/auto-complete.css?1571858038" rel="stylesheet">
    <link href="/docs/css/atom-one-dark-reasonable.css?1571858038" rel="stylesheet">
    <link href="/docs/css/theme.css?1571858038" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css?1571858038" rel="stylesheet">
    
      <link href="/docs/css/theme-red.css?1571858038" rel="stylesheet">
    

    <script src="/docs/js/jquery-3.3.1.min.js?1571858038"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/mixnet/clients/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/docs/images/nym-logo.svg" alt="Nym Logo">

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/docs/js/lunr.min.js?1571858038"></script>
<script type="text/javascript" src="/docs/js/auto-complete.js?1571858038"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/nymtech.net\/docs\/";
    
</script>
<script type="text/javascript" src="/docs/js/search.js?1571858038"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/overview/" title="Overview" class="dd-item 
        
        
        
        ">
      <a href="/docs/overview/">
          <b>1. </b>Overview
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs/overview/status/" title="Current Status" class="dd-item ">
        <a href="/docs/overview/status/">
        Current Status
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/overview/links/" title="Links" class="dd-item ">
        <a href="/docs/overview/links/">
        Links
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/mixnet/" title="Mixnet" class="dd-item 
        parent
        
        
        ">
      <a href="/docs/mixnet/">
          <b>2. </b>Mixnet
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs/mixnet/installation/" title="Installation" class="dd-item ">
        <a href="/docs/mixnet/installation/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/mixnet/clients/" title="Mixnet client" class="dd-item active">
        <a href="/docs/mixnet/clients/">
        Mixnet client
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/mixnet/mixnodes/" title="Mixnodes" class="dd-item ">
        <a href="/docs/mixnet/mixnodes/">
        Mixnodes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/mixnet/storage-nodes/" title="Storage Nodes" class="dd-item ">
        <a href="/docs/mixnet/storage-nodes/">
        Storage Nodes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/mixnet/chat-demo/" title="Chat demo" class="dd-item ">
        <a href="/docs/mixnet/chat-demo/">
        Chat demo
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/validators/" title="Validators" class="dd-item 
        
        
        
        ">
      <a href="/docs/validators/">
          <b>3. </b>Validators
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs/validators/coconut/" title="Coconut credentials" class="dd-item ">
        <a href="/docs/validators/coconut/">
        Coconut credentials
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/validators/validator-flow/" title="Validator flow" class="dd-item ">
        <a href="/docs/validators/validator-flow/">
        Validator flow
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/validators/client-demo/" title="Client Demo" class="dd-item ">
        <a href="/docs/validators/client-demo/">
        Client Demo
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/validators/installing-testnet/" title="Installing a Nym Validator Testnet" class="dd-item ">
        <a href="/docs/validators/installing-testnet/">
        Installing a Nym Validator Testnet
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/directory-and-dashboard/" title="Other Components" class="dd-item 
        
        
        
        ">
      <a href="/docs/directory-and-dashboard/">
          <b>4. </b>Other Components
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/nymtech/"><i class='fab fa-fw fa-github'></i> Nym Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://nymtech.net"><i class='fas fa-fw fa-bullhorn'></i> Website</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/'>Nym</a> > <a href='/docs/mixnet/'>Mixnet</a> > Mixnet client
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#clients">Clients</a></li>
<li><a href="#integrating-the-mixnet-client-in-your-applications">Integrating the mixnet client in your applications</a>
<ul>
<li><a href="#in-go">In Go</a></li>
<li><a href="#in-other-languages">In other languages</a></li>
</ul></li>
<li><a href="#understanding-the-client">Understanding the client</a>
<ul>
<li><a href="#determining-network-topology">Determining network topology</a></li>
<li><a href="#sending-messages">Sending messages</a></li>
<li><a href="#sphinx-packet-creation">Sphinx packet creation</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Mixnet client
            </h1>
          

        





<h3 id="clients">Clients</h3>


<div class="notices info" ><p>The Nym Client was built in the <a href="../installation">Installation</a> section. If you haven&rsquo;t yet built the Nym Mixnet and want to run the code on this page, go there first.</p>
</div>


<p>From inside the <code>nym-mixnet</code> directory, the <code>loopix-client</code> binary got built to the <code>build</code> directory, so you can run it with <code>./build/loopix-client</code>:</p>

<pre><code class="language-shell">nym-mixnet$ ./build/loopix-client
Usage: loopix-client COMMAND [OPTIONS]


  _                      _
 | |    ___   ___  _ __ (_)_  __
 | |   / _ \ / _ \| '_ \| \ \/ /
 | |___ (_) | (_) | |_) | |&gt;  &lt;
 |_____\___/ \___/| .__/|_/_/\_\
		  |_|            (client)



Commands:

    init        Initialise a Loopix client
    run         Run a persistent Loopix client process
    socket      Run a background Loopix client listening on a specified socket

Run &quot;loopix-client help &lt;command&gt;&quot; for more info on a specific command.
</code></pre>

<p>As you can see, there are three commands you can issue to the client.</p>

<ol>
<li>init - initialize a new client instance</li>
<li>run - run a loopix client in the foreground</li>
<li>socket - run and listen on a socket for real messages as well</li>
</ol>

<p>Let&rsquo;s try it out. First, you need to initialize a new client.</p>

<pre><code>nym-mixnet$ ./build/loopix-client init --id alice
Saved generated private key to /home/you/.loopix/clients/alice/config/private_key.pem
Saved generated public key to /home/you/.loopix/clients/alice/config/public_key.pem
Saved generated config to /home/you/.loopix/clients/alice/config/config.toml
</code></pre>

<p>Have a look at the generated files if you&rsquo;d like - they contain client configurations, public/private keypairs, etc.</p>

<p>You can run the client with user <code>alice</code> by doing this:</p>

<pre><code class="language-shell">./build/loopix-client run --id alice
Our Public Key is: z-OQECd8VgC1BeVi6HsHMUbn3REnqZq1uXcyy9j7Hxc=

</code></pre>

<p>It doesn&rsquo;t look like much happened, it just sits there. But in fact, when you <code>run()</code> the client, it immediately starts generating (fake) cover traffic and sending it to the Nym Mixnet.</p>


<div class="notices info" ><p>Congratulations, you have just contributed a tiny bit of privacy to the world! <code>&lt;CTRL-C&gt;</code> to stop the client.</p>
</div>


<p>Try stopping and starting the client a few times. If you&rsquo;re interested, you should see your traffic reflected in the network traffic <em>sent</em> and <em>received</em> metrics at the <a href="https://dashboard.nymtech.net/">Nym Dashboard</a>. Have a look on the right hand side:</p>

<p><img src="/docs/images/dashboard.gif" alt="dashboard" /></p>

<h3 id="integrating-the-mixnet-client-in-your-applications">Integrating the mixnet client in your applications</h3>

<p>Depending on what language you&rsquo;re using, you can fire up the client in one of two ways.</p>

<h4 id="in-go">In Go</h4>

<p>If you&rsquo;re a Gopher, you can compile the client code into your own application in the normal Go fashion. Calling <code>client.Start()</code> and <code>client.SendMessage(message []byte, recipient config.ClientConfig)</code> will allow you to send your traffic over the Nym Mixnet. The <code>./build/loopix-client run --id alice</code> command, in fact, just calls <code>client.Start()</code>.</p>

<h4 id="in-other-languages">In other languages</h4>

<p>If you&rsquo;re not a Gopher (go coder), don&rsquo;t despair. You can run the client in socket mode instead, and use either websockets or TCP sockets. For a websocket, try this:</p>

<p><code>./build/loopix-client socket --id alice --socket websocket --port 1863</code></p>

<p>This will start a websocket connection at <code>ws://localhost:1863/mix</code>. You can push either text or raw bytes down the websocket, and it&rsquo;ll be pushed to the mixnet.</p>

<p>For a TCP socket:</p>

<p><code>./build/loopix-client socket --id alice --socket tcp --port 1863</code></p>

<p>No matter whether you use <code>./loopix-client run</code>, compile the client into your code, or start a <code>./loopix-client socket</code>, the client will reach out and grab the mixnet topology, and immediately start to send fake cover traffic. When you have a real message to send, that&rsquo;ll be sent instead of the cover traffic.</p>

<h3 id="understanding-the-client">Understanding the client</h3>

<p>A large proportion of the Nym Mixnet&rsquo;s functionality is implemented client-side, including:</p>

<ol>
<li>determining network topology</li>
<li>sending Sphinx packets with real messages</li>
<li>sending Sphinx packet <em>cover traffic</em> when no real messages are being sent</li>
</ol>

<h4 id="determining-network-topology">Determining network topology</h4>

<p>The first thing to understand is that it&rsquo;s the local client which picks the path that each packet will take through the mixnet topology.</p>

<p>When you first <code>run</code> your client, the client needs to figure what mixnodes exist, which layers they&rsquo;re in, and their public keys.</p>

<p>The client asks the Nym directory for the current mixnet topology. The client handles all this automatically, but in order to understand what&rsquo;s happening, you can try it yourself:</p>

<pre><code>curl -X GET &quot;https://directory.nymtech.net/api/presence/topology&quot; -H  &quot;accept: application/json&quot; | jq   
</code></pre>

<p>This returns a JSON-formatted list of <code>MixNodes</code>, among other things:</p>

<pre><code class="language-json">&quot;MixNodes&quot;: [
  {
    &quot;host&quot;: &quot;3.9.12.238:1789&quot;,
    &quot;pubKey&quot;: &quot;ALf35HwBzXZXxaS6V55W7cLsx4a26AaRefinwwJHrg4=&quot;,
    &quot;layer&quot;: 3,
    &quot;lastSeen&quot;: 1571847181617417500
  },
  {
    &quot;host&quot;: &quot;35.178.213.77:1789&quot;,
    &quot;pubKey&quot;: &quot;KlfEn07FzcN93nMzzlsgq3wN5O1ID6O3Pd4DbezHEWo=&quot;,
    &quot;layer&quot;: 2,
    &quot;lastSeen&quot;: 1571847180498272500
  },
  {
    &quot;host&quot;: &quot;52.56.99.196:1789&quot;,
    &quot;pubKey&quot;: &quot;_ObRUsYnHDJOPDHXyfq5bnIoSbdn3BsSRcrLl-FCY1c=&quot;,
    &quot;layer&quot;: 2,
    &quot;lastSeen&quot;: 1571847180496028700
  },
  {
    &quot;host&quot;: &quot;18.130.86.190:1789&quot;,
    &quot;pubKey&quot;: &quot;dMtoH6vWDBfwjrU0EzPd-fhZDOGJazELsTp2qLyt72U=&quot;,
    &quot;layer&quot;: 1,
    &quot;lastSeen&quot;: 1571847181197982700
  },
  {
    &quot;host&quot;: &quot;3.10.22.152:1789&quot;,
    &quot;pubKey&quot;: &quot;03FFZ5RgfeBPmVVERenJOCLb-yXlOUtstc6izYc-wFs=&quot;,
    &quot;layer&quot;: 1,
    &quot;lastSeen&quot;: 1571847180994739500
  },
  {
    &quot;host&quot;: &quot;35.176.155.107:1789&quot;,
    &quot;pubKey&quot;: &quot;oaEqLzA5nUxMAqfg6yW5pneWC342uDMfVsSHxyNQ-DE=&quot;,
    &quot;layer&quot;: 3,
    &quot;lastSeen&quot;: 1571847181710269200
  }
],
</code></pre>

<p>The client does this when it starts. Each node reports what layer it&rsquo;s in, its public key, and its IP address. The client now has all the information needed to pick a path through the mixnet for each Sphinx packet, and do packet encryption.</p>

<h4 id="sending-messages">Sending messages</h4>

<p>Since it now understands the topology of the mixnet, the client can start sending traffic immediately. But what should it send?</p>

<p>If there&rsquo;s a real message to send (because you called <code>client.SendMessage()</code> or poked something down the client&rsquo;s socket connection), then the client will send a real message. Otherwise, the client will send cover traffic, at a rate determined in the client config file in <code>~/.loopix/clients/&lt;client-id&gt;/config.toml</code></p>

<p>Real messages and cover traffic are both encrypted using the Sphinx packet format.</p>

<h4 id="sphinx-packet-creation">Sphinx packet creation</h4>

<p>Clients create Sphinx packets. These packets are a bit complicated, but for now all you need to know is that they have the following characteristics:</p>

<ol>
<li>they consist of a header and a body</li>
<li>the header contains unencrypted routing data</li>
<li>bodies are encrypted</li>
<li>bodies are padded so that they&rsquo;re all the same size</li>
<li>observers can&rsquo;t tell anything about what&rsquo;s inside the encrypted body</li>
<li>the body is layer-encrypted - it may contain either another sphinx packet or an unencrypted message</li>
</ol>

<p>Now let&rsquo;s go build the Nym Mixnode and see what happens when a Sphinx packet hits a mixnode.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/docs/mixnet/installation/" title="Installation"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/docs/mixnet/mixnodes/" title="Mixnodes" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js?1571858038"></script>
    <script src="/docs/js/perfect-scrollbar.min.js?1571858038"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js?1571858038"></script>
    <script src="/docs/js/jquery.sticky.js?1571858038"></script>
    <script src="/docs/js/featherlight.min.js?1571858038"></script>
    <script src="/docs/js/highlight.pack.js?1571858038"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom-3.6.0.js?1571858038"></script>
    <script src="/docs/js/learn.js?1571858038"></script>
    <script src="/docs/js/hugo-learn.js?1571858038"></script>

    <link href="/docs/mermaid/mermaid.css?1571858038" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js?1571858038"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

